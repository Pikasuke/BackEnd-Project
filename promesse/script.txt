'use strict';
document.getElementById('submit').addEventListener('click',function (e){
	e.preventDefault();
	ajax('traitement1.php')
		.then( response => {
			document.getElementById('result_1').textContent = response;
			return ajax('traitement2.php');
		})
		.then( response => {
			document.getElementById('result_2').textContent = response;
			document.getElementById('personne').value = "";
		})
})


function ajax(fileTraitment)
{
	return new Promise(function (resolve,reject){
		let xhr;
		let parameters = 'personne=' + personne.value;
		(window.XMLHttpRequest) ? xhr = new XMLHttpRequest() : xhr = new ActiveXObject('Microsoft.XMLHTTP');
		xhr.onreadystatechange = function (){
			if(xhr.readyState == 4 && xhr.status == 200)
			{
				resolve(this.responseText);
			}
		}
		xhr.open('POST',fileTraitment,true);
		xhr.setRequestHeader('Content-type',"application/x-www-form-urlencoded");
		xhr.send(parameters);
	});
}
